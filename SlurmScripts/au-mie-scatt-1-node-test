#!/bin/bash

# SLURM script to make intra-node test with the 103 nm gold nanosphere in visible spectrum

#SBATCH --ntasks=64                # Total number of cores

#SBATCH --nodes=1                  # Total number of nodes

#SBATCH -p free-rider              # Partition

#SBATCH -t 360                     # Maximum time reserved for execution, expressed in minutes

#SBATCH --job-name=au-mie-1-node                             # Task name

#SBATCH --output="ErrorLogs/au-mie-1-node-%j.out" # Output file

#SBATCH --error="ErrorLogs/au-mie-1-node-%j.err"  # Error file

# #SBATCH --test-only   # Check if legible and return posible start time

# Execute!
export PATH=/nfs/home/vpais/miniconda/bin:$PATH
conda init bash
source ~/.bash_profile
source ~/.bashrc
conda activate pmp
cd /nfs/home/vpais/ThesisPython

# Test 1 node splitting evenly.
srun -n $SLURM_NTASKS --mpi=pmi2 python -m mpi4py ./AuMieSphere/u_au_mie_scattering.py -nc $SLURM_NTASKS -res 4 -f "AuMieSphere/AuMie/15)TUPAC/1NodeTest" -s "1NodeRes4" --load-flux False
